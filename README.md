# Recipe Analytics: Linking Recipe Complexity and User Ratings for Culinary Insights 

Authors: Preethi Manne & Abhi Sathvika Goriparthy

## Introduction
The dataset being analyzed contains detailed information about recipes from a popular online platform, offering a rich repository of culinary data. Each recipe is described by various attributes, including the number of steps required, the ingredients involved, the time needed to prepare, and its average rating by users. This dataset allows us to delve into user preferences and explore what factors make a recipe more appealing.

### Project Focus:
Our project focuses on answering this central question:
**"What is the relationship between the number of steps in a recipe and its average user rating?"**
This question is intriguing because it sheds light on how complexity in recipe preparation might influence user satisfaction. Does a simple recipe garner more favorable reviews, or do users appreciate the effort and detail of a complex recipe? Answering this can benefit chefs, culinary websites, and anyone looking to optimize recipe creation for higher ratings.

### Why It Matters
This question has practical implications for both recipe creators and consumers:
Recipe Creators: Insights from this analysis can help content creators design recipes that align with user preferences, maximizing engagement and positive feedback.
Consumers: Understanding these patterns helps readers find recipes that are more likely to meet their expectations, whether they value simplicity or complexity.

### Dataset Overview
For our analysis, we used two datasets, recipes and interactions. 

Relevant columns:
- n_steps: The number of steps required to prepare the recipe. This reflects the recipe's complexity.
- avg_rating: The average user rating of the recipe, a measure of its popularity and perceived quality.
- minutes: The total preparation time for the recipe, providing context to its complexity.

### Datasets Used
- Recipes: 83782 rows, 12 columns
- Interactions: 731927 rows, 5 columns

| Column             | Description                                                                                                                                                                                       |
| :----------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `'name'`           | Recipe name                                                                                                                                                                                       |
| `'id'`             | Recipe ID                                                                                                                                                                                         |
| `'minutes'`        | Minutes to prepare recipe                                                                                                                                                                         |
| `'contributor_id'` | User ID who submitted this recipe                                                                                                                                                                 |
| `'submitted'`      | Date recipe was submitted                                                                                                                                                                         |
| `'tags'`           | Food.com tags for recipe                                                                                                                                                                          |
| `'nutrition'`      | Nutrition information in the form [calories (#), total fat (PDV), sugar (PDV), sodium (PDV), protein (PDV), saturated fat (PDV), carbohydrates (PDV)]; PDV stands for “percentage of daily value” |
| `'n_steps'`        | Number of steps in recipe                                                                                                                                                                         |
| `'steps'`          | Text for recipe steps, in order                                                                                                                                                                   |
| `'description'`    | User-provided description                                                                                                                                                                         |
| `'ingredients'`    | Text for recipe ingredients                                                                                                                                                                       |
| `'n_ingredients'`  | Number of ingredients in recipe                                                                                                                                                                   |

         

| Column        | Description         |
| :------------ | :------------------ |
| `'user_id'`   | User ID             |
| `'recipe_id'` | Recipe ID           |
| `'date'`      | Date of interaction |
| `'rating'`    | Rating given        |
| `'review'`    | Review text         |


## Data Cleaning and Exploratory Data Analysis

We conducted the following data cleaning steps:

1. Left merge the recipes and interactions datasets on id and recipe_id.

   - The purpose of this step is to helps match the unique recipes with their rating and review. We did a left merge specifically to get all the recipes in the recipes dataset.

1. Checked data types of all the columns.

   - The purpose of this step is to help evaluate what data cleaning steps and data type conversion are needed.
   - | Column             | Description |
     | :----------------- | :---------- |
     | `'name'`           | object      |
     | `'id'`             | int64       |
     | `'minutes'`        | int64       |
     | `'contributor_id'` | int64       |
     | `'submitted'`      | object      |
     | `'tags'`           | object      |
     | `'nutrition'`      | object      |
     | `'n_steps'`        | int64       |
     | `'steps'`          | object      |
     | `'description'`    | object      |
     | `'ingredients'`    | object      |
     | `'n_ingredients'`  | int64       |
     | `'user_id'`        | float64     |
     | `'recipe_id'`      | float64     |
     | `'date'`           | object      |
     | `'rating'`         | float64     |
     | `'review'`         | object      |

1. Filled all ratings of 0 with np.nan.

   - Rating is typicaly on a scale from 1 to 5. 1 represents the lowest rating, while 5 represents the highest rating. Leaving missing ratings as is would affect the average rating column. While computing the average, the denominator would be higher, while the numerator would just add a 0, not changing it. So this would make the average smaller than it should be. Therfore, we repalce all the ratings of 0 with np.nan.

1. Added column `'average_rating'` containing average rating per recipe.

   - A recipe's overall rating is determined by averaging the ratings provided by multiple users, offering a more comprehensive evaluation of its quality.
  
1. Dropped duplicate values of the recipe name
   -  The purpose of this step is to ensure that there is only one average rating listed per recipe.
  


### Result of cleaned dataframe 

| name                                 |     id |   minutes |   contributor_id | submitted   | tags                                                                                                                                                                                                                                                                                                                     | nutrition                                  |   n_steps | steps                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | description                                                                                                                                                                                                                                                                                                    | ingredients                                                                                                                                                                        |   n_ingredients |          user_id |   recipe_id | date       |   rating_x | review                                                                                                                                                                               |   avg_rating |
|:-------------------------------------|-------:|----------:|-----------------:|:------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-------------------------------------------|----------:|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------:|-----------------:|------------:|:-----------|-----------:|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------:|
| 0 carb   0 cal gummy worms           | 283618 |        45 |           134414 | 2008-02-02  | ['60-minutes-or-less', 'time-to-make', 'course', 'preparation', 'healthy', '5-ingredients-or-less', 'desserts', 'lunch', 'snacks', 'easy', 'low-fat', 'dietary', 'low-cholesterol', 'low-saturated-fat', 'high-protein', 'high-in-something', 'low-in-something']                                                        | [384.7, 0.0, 0.0, 70.0, 159.0, 0.0, 6.0]   |        15 | ['stir all ingredients until dissolved', 'pour the mixture onto a large dinner plate and refrigerate', 'it will set in about 20 minutes', 'you can either slice it into worms , or roll up the rubbery disk of gelatin and cut it every 1 / 4 inch with a large pair of scissors', 'you can also use tiny cutters to make little shapes', 'total recipe: 50 cal', '12 g protein', '0 g tot fat', '0 g carb', '0 g fiber', '5 mg', 'calcium', '0 mg iron', '7 mg sodium', '0 mg cholesterol'] | these are delicious and guilt free!                                                                                                                                                                                                                                                                            | ['sugar-free jello', 'gelatin', 'boiling water']                                                                                                                                   |               3 | 824257           |      283618 | 2008-04-25 |          5 | really good!!! The only thing i did different was i put little chocolate bits in it(i have weird taste buds. lol)                                                                    |      4.75    |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                    |                 |                  |             |            |            |                                                                                                                                                                                      |              |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | *if sour gummies are desired, add one packet of unsweetened kool-aid in a flavor that goes well with your jell-o flavor. the                                                                                                                                                                                   |                                                                                                                                                                                    |                 |                  |             |            |            |                                                                                                                                                                                      |              |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | kool-aid really makes them sour (but good).                                                                                                                                                                                                                                                                    |                                                                                                                                                                                    |                 |                  |             |            |            |                                                                                                                                                                                      |              |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                    |                 |                  |             |            |            |                                                                                                                                                                                      |              |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | below:                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                    |                 |                  |             |            |            |                                                                                                                                                                                      |              |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | really not 6oz packages the recipe needed a quality though.                                                                                                                                                                                                                                                    |                                                                                                                                                                                    |                 |                  |             |            |            |                                                                                                                                                                                      |              |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | so just the regular packages.                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                    |                 |                  |             |            |            |                                                                                                                                                                                      |              |
| 0 point ice cream  only 1 ingredient | 480558 |       125 |          2283828 | 2012-06-05  | ['time-to-make', 'course', 'main-ingredient', 'preparation', 'for-1-or-2', 'low-protein', 'healthy', '5-ingredients-or-less', 'desserts', 'fruit', 'easy', 'frozen-desserts', 'dietary', 'low-sodium', 'low-cholesterol', 'low-saturated-fat', 'healthy-2', 'low-in-something', 'number-of-servings', '4-hours-or-less'] | [304.1, 13.0, 121.0, 3.0, 13.0, 9.0, 19.0] |         5 | ['1) peel your bananas first', '2) cut them into small pieces', '3) freeze for just 1-2 hours on a plate', '4) blend , blend , blend - scraping down the bowl when they stick', '5) enjoy the magic moment when they turn into ice cream !']                                                                                                                                                                                                                                                 | yummy!! (got this recipe from                                                                                                                                                                                                                                                                                  | ['bananas', 'peanut butter', 'honey']                                                                                                                                              |               3 |      1.76225e+06 |      480558 | 2012-09-09 |          5 | "Peel your bananas first..."  No kidding!                                                                                                                                            |      5       |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | http://www.thekitchn.com/stepbystep-instructions-for-on-97170)                                                                                                                                                                                                                                                 |                                                                                                                                                                                    |                 |                  |             |            |            |                                                                                                                                                                                      |              |
| 0 point soup   ww                    | 391705 |        55 |            39835 | 2009-09-24  | ['60-minutes-or-less', 'time-to-make', 'course', 'main-ingredient', 'preparation', 'soups-stews', 'vegetables', 'easy', 'vegetarian', 'stove-top', 'dietary', 'equipment', '3-steps-or-less']                                                                                                                            | [26.8, 0.0, 11.0, 5.0, 2.0, 0.0, 1.0]      |         5 | ['put first 12 ingredients in a large pot', 'cover and bring to a boil over high heat', 'reduce heat to a simmer and simmer partly covered for 10 minutes or until vegetables are tender', 'leave veggies whole or i use an immersion blender and puree a bit -- leaving some veggie chunks', 'stir in parsley and season with salt , pepper and lemon juice']                                                                                                                               | another 0 point soup -- just clock full of veggies! i don't eat this as snacks (as i know some people do) but rather as for dinner with sandwiches. this freezes wonderfully in small tupperware containers -- which is great to bring to work and heat up in the micro. recipe source: www.weightwatchers.com | ['garlic cloves', 'onion', 'carrots', 'red bell pepper', 'zucchini', 'cabbage', 'swiss chard', 'broccoli', 'thyme', 'vegetable broth', 'parsley', 'salt', 'pepper', 'lemon juice'] |              14 | 166642           |      391705 | 2009-10-20 |          5 | This is wonderful soup. It is very filling and tasty! Thanks for sharing.                                                                                                            |      4.77778 |
| 0 point soup  crock pot              | 416980 |       305 |            39835 | 2010-03-18  | ['course', 'main-ingredient', 'preparation', 'soups-stews', 'vegetables', 'easy', 'vegetarian', 'crock-pot-slow-cooker', 'dietary', 'equipment', '3-steps-or-less']                                                                                                                                                      | [40.7, 0.0, 17.0, 2.0, 4.0, 0.0, 2.0]      |         2 | ['place all ingredients in the crockpot and cook on high for 5 hours or on low for 8-10 hours', 'remove bay leaves']                                                                                                                                                                                                                                                                                                                                                                         | served by itself is a 0 point meal or with sandwiches for supper or lunch for a more filling meal is still relatively "safe" as far a point wise.                                                                                                                                                              | ['spinach', 'carrots', 'celery ribs', 'onion', 'garlic clove', 'vegetable broth', 'tomatoes', 'bay leaves', 'basil', 'oregano', 'red pepper flakes']                               |              11 | 573325           |      416980 | 2010-03-30 |          5 | What a wonderful soup!!!!                                                                                                                                                            |      5       |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                    |                 |                  |             |            |            | Ellie, this really is such a great recipe full of flavour and so good for you, too! :)                                                                                               |              |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                    |                 |                  |             |            |            | I luved the combination of veggies, which was complimented nicely by the herbs and broth. So yummy!                                                                                  |              |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                    |                 |                  |             |            |            | Due to personal preference I left out the celery and didnt miss it at all. The soup was hearty, filling and quite spring like with all those colourful veggies.                      |              |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                    |                 |                  |             |            |            | I dont own a crock pot, so I just put everything into a pot on the stove and simmered it on medium heat for about 30 minutes. It worked out nicely this way, too.                    |              |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                    |                 |                  |             |            |            | I will most definitely make this again!                                                                                                                                              |              |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                    |                 |                  |             |            |            | THANK YOU SO MUCH for sharing it here with us!                                                                                                                                       |              |
|                                      |        |           |                  |             |                                                                                                                                                                                                                                                                                                                          |                                            |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                    |                 |                  |             |            |            | Made and reviewed for the VIP in Veggie Swap #21 April 2010.                                                                                                                         |              |
| 007  martini                         | 429524 |         5 |           599450 | 2010-06-12  | ['celebrity', '15-minutes-or-less', 'time-to-make', 'course', 'cuisine', 'preparation', 'occasion', 'for-1-or-2', '5-ingredients-or-less', 'beverages', 'easy', 'european', 'english', 'cocktails', 'novelty', 'number-of-servings']                                                                                     | [146.5, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]      |         4 | ['rinse martini glass with extra dry vermouth', 'add vodka , gin , and lillet blanc to a cocktail shaker filled with crushed ice', 'shake vigorously', 'pour into prepared martini glass']                                                                                                                                                                                                                                                                                                   | based on a recipe from ray foley's the ultimate little martini book containing over 1000 martini recipes.                                                                                                                                                                                                      | ['dry vermouth', 'vodka', 'gin', 'lillet blanc']                                                                                                                                   |               4 | 724631           |      429524 | 2012-08-20 |          5 | Classic martini, got to enjoy the taste without feeling knocked over.  Perfect.  DH looks more like Bond to me right now.  Made for The Wild Bunch for ZWT8 for its trip to Britain. |      5       |

